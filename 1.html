<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
   <input id="file" type="file" name="file"/>
<body>
    <script>
       document.getElementById('file').onchange = function(e){
           console.log(e.target.value)
           console.log( document.getElementById('file').files)
           var MyTest = document.getElementById('file').files[0]
           var reader = new FileReader();
            reader.readAsDataURL(MyTest);
            reader.onload = function(theFile) {
            　　var image = new Image();
            image.src = theFile.target.result;
            image.onload = function() {
            　　alert("图片的宽度为"+this.width+",长度为"+this.height);
            };
            };
       }
       


 
        // new 操作  https://www.cnblogs.com/shuizhongyu111/p/7355383.html
        // 它创建了一个全新的对象。
        // 它会被执行[[Prototype]]（也就是__proto__）链接。
        // 它使this指向新创建的对象。。
        // 通过new创建的每个对象将最终被[[Prototype]]链接到这个函数的prototype对象上。
        // 如果函数没有返回对象类型Object(包含Functoin, Array, Date, RegExg, Error)，那么new表达式中的函数调用将返回该对象引用。
    //     function Person(name,job){
    //         this.name = name;
    //         this.job = job
    //     }
    //     function New(func) {
    //       var res = {};
    //       if(func.prototype !== null){
    //           res.__proto__ = func.prototype
    //       }
    //       console.log('res',res)
    //       var ret = func.apply(res,Array.prototype.slice.call(arguments,1));
    //       console.log('res',res)
    //       if(typeof ret == 'object' || typeof ret == 'function' && typeof ret !== null){
    //           return ret;
    //       }
    //       return res;
    //    }
    //    var obj01 = new Person('Tmac-1','火箭队');
    //    console.log(obj01)
    //    var obj02 = New(Person,'Tmac-1','火箭队')
    //    console.log(obj02)


    // call 和 apply 的实现
    // call核心：
    // 将函数设为对象的属性
    // 执行&删除这个函数
    // 指定this到函数并传入给定参数执行函数
    // 如果不传入参数，默认指向为 window
    Function.prototype.call2 = function( content = window ){
        // console.log(this)
        content.fn = this;
        var arg = [...arguments].slice(1);
        let result = content.fn(...arg);
        delete content.fn;
        return result;
    }
    var foo = {
        name:'Tmac-1'
    }
    function boo(job,sex){
       console.log(job,sex,this.name)
    }
    boo.call2(foo,"火箭","男")
    console.log('foo',foo)


    // bind的实现  https://blog.csdn.net/smallsun_229/article/details/80298147
    // Function.prototype.bind2 = function(content) {
    //     if(typeof this != "function") {
    //         throw Error("not a function")
    //     }
    //     // 若没问参数类型则从这开始写
    //     console.log('arguments',arguments)
    //     let fn = this;
    //     // console.log('this',this)
    //     let args = [...arguments].slice(1);
    //     let resFn = function() {
    //         console.log('this',this)
    //         // console.log('content',content,args.concat(...arguments))
    //         console.log(this instanceof resFn)
    //         return fn.apply(this instanceof resFn ? this : content,args.concat(...arguments) )
    //     }
    //     function tmp() {}
    //     tmp.prototype = this.prototype;
    //     resFn.prototype = new tmp();
    //     // console.log('resFn',resFn)
    //     return resFn;
    // }

//     var module02 = {
//             x: 42,
//             getX: function(a,b) {
//                 console.log(a,b)
//                 return this.x;
//             }
//     }
//    var unboundGetX = module02.getX;   
//    var boundGetX = unboundGetX.bind2(module02,1);
//    boundGetX(2);
     
    //  function Point (x,y){
    //      this.x = x;
    //      this.y = y;
    //  }

    //  Point.prototype.toString =  function(){
    //      return this.x + ',' + this.y
    //  }

    //  var emptyObj = {a:111};
    //  var YAxisPoint = Point.bind2(emptyObj,1);
    //  var ret = new YAxisPoint(2);
    //  console.log(ret.toString())
    //  console.log( YAxisPoint.prototype.constructor  )

    // 红绿灯问题Promise
    // function red(){
    //     console.log('red');
    // }
    // function green(){
    //     console.log('green');
    // }
    // function yellow(){
    //     console.log('yellow');
    // }
    // var light = function(timmer, cb){
    //     return new Promise(function(resolve, reject) {
    //         console.log('light')
    //         setTimeout(function() {
    //             cb();
    //             resolve();
    //         }, timmer);
    //     });
    // };
    // var step = function() {
    //     Promise.resolve().then(function(){
    //         // console.log('111')
    //         return light(3000, red);
    //     }).then(function(){
    //         // console.log('222')
    //         return light(2000, green);
    //     }).then(function(){
    //         // console.log('333')
    //         return light(1000, yellow);
    //     }).then(function(){
    //         step();
    //     });
    // }
    // step();

    </script>
</body>
</html>